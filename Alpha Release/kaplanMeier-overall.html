

<html>
    <head>
        <title>Kaplan Meier</title>
        <link href='http://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.0.8/d3.min.js"></script>
        <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
        <script src="d3.slider.js"></script>
        <style>
            body{
                font-family:'Ubuntu', 'Helvetica Neue', Helvetica, Arial;
            }
            .d3-tip {
                line-height: 1;
                font-weight: bold;
                padding: 12px;
                background: rgba(0, 0, 0, 0.8);
                color: #fff;
                border-radius: 2px;
            }

            .legend {
                font-size: 12px;
            }
            rect {
                stroke-width: 2;
            }
            /* Creates a small triangle extender for the tooltip */
            .d3-tip:after {
                box-sizing: border-box;
                font-size: 10px;
                width: 100%;
                line-height: 1;
                color: rgba(0, 0, 0, 0.8);
                content: "\25BC";
                position: absolute;
                text-align: center;
            }

            /* Style northward tooltips differently */
            .d3-tip.n:after {
                margin: -1px 0 0 0;
                top: 100%;
                left: 0;
            }
            .axis path,
            .axis line {
                fill: none;
                stroke: #000;
                shape-rendering: crispEdges;
            }

            .x.axis path {
                display: none;
            }
            h2 {
                font-family: Georgia;
            }
            .container {
                height:500px;}
            </style>

        </head>
        <body>
            <div class="container">
            <h2 style="text-align:center;"> OVERVIEW OF POPULATION </h2> <br/>
            <div id="wrapper" style="margin:10px auto;"> </div>
            <div id="checkboxes" style="margin-left:150px;">
                <input type="checkbox" id="white" value ="white" checked/> White &nbsp;&nbsp;&nbsp;
                <input type="checkbox" id="other" value ="other" checked/> Other &nbsp;&nbsp;&nbsp;
                <input type="checkbox" id="african" value ="African-American" checked/> African American &nbsp;&nbsp;&nbsp;
                <input type="checkbox" id="hispanic" value ="hispanic" checked/> Hispanic &nbsp;&nbsp;&nbsp;
                <input type="checkbox" id="asian" value ="white" checked/> Asian/Pacific Islander

            </div>
        </div>  
        <script>
            /* Data Given */
            data = {
                treatments: [// Order matters | data.treatments[a][i].t is always less than data.treatments[a][i+1].t
                    [
                        //African American data
                        {t: 0, d: 0, n: 96},
                        {t: 5.7, d: 1, n: 96},
                        {t: 5.767, d: 1, n: 95},
                        {t: 6.533, d: 1, n: 94},
                        {t: 7.2, d: 1, n: 93},
                        {t: 8.7, d: 1, n: 92},
                        {t: 10.267, d: 0, n: 91},
                        {t: 10.533, d: 0, n: 90},
                        {t: 11.267, d: 1, n: 89},
                        {t: 11.9, d: 1, n: 88},
                        {t: 12.167, d: 1, n: 87},
                        {t: 12.467, d: 0, n: 86},
                        {t: 12.7, d: 1, n: 85},
                        {t: 12.9, d: 1, n: 84},
                        {t: 13.1, d: 1, n: 83},
                        {t: 15.1, d: 1, n: 82},
                        {t: 15.167, d: 1, n: 81},
                        {t: 15.467, d: 1, n: 80},
                        {t: 16.2, d: 1, n: 79},
                        {t: 17.167, d: 1, n: 78},
                        {t: 18.867, d: 1, n: 77},
                        {t: 19.8, d: 1, n: 76},
                        {t: 20.433, d: 1, n: 75},
                        {t: 21, d: 1, n: 74},
                        {t: 22.3, d: 1, n: 73},
                        {t: 26.167, d: 1, n: 72},
                        {t: 26.6, d: 1, n: 71},
                        {t: 28.1, d: 1, n: 70},
                        {t: 29.8, d: 1, n: 69},
                        {t: 30.6, d: 1, n: 68},
                        {t: 31.033, d: 1, n: 67},
                        {t: 31.2, d: 1, n: 66},
                        {t: 32.4, d: 1, n: 65},
                        {t: 32.433, d: 1, n: 64},
                        {t: 32.633, d: 1, n: 63},
                        {t: 33.167, d: 0, n: 62},
                        {t: 33.367, d: 1, n: 61},
                        {t: 33.533, d: 0, n: 60},
                        {t: 35.433, d: 0, n: 58},
                        {t: 35.667, d: 1, n: 57},
                        {t: 36.367, d: 1, n: 56},
                        {t: 38.967, d: 1, n: 55},
                        {t: 39.033, d: 0, n: 54},
                        {t: 39.3, d: 1, n: 53},
                        {t: 40.067, d: 1, n: 52},
                        {t: 41.467, d: 1, n: 51},
                        {t: 42.833, d: 1, n: 50},
                        {t: 44.667, d: 1, n: 49},
                        {t: 44.833, d: 1, n: 48},
                        {t: 45.233, d: 1, n: 47},
                        {t: 47.667, d: 0, n: 46},
                        {t: 48.433, d: 1, n: 45},
                        {t: 48.833, d: 0, n: 44},
                        {t: 49.633, d: 1, n: 43},
                        {t: 50.333, d: 1, n: 42},
                        {t: 50.633, d: 1, n: 41},
                        {t: 53.867, d: 0, n: 40},
                        {t: 55.533, d: 1, n: 39},
                        {t: 56.7, d: 1, n: 38},
                        {t: 56.9, d: 0, n: 37},
                        {t: 57.7, d: 2, n: 36},
                        {t: 59.4, d: 1, n: 34},
                        {t: 60.733, d: 0, n: 33},
                        {t: 61.833, d: 1, n: 32},
                        {t: 63.367, d: 1, n: 31},
                        {t: 66.667, d: 1, n: 30},
                        {t: 66.967, d: 0, n: 29},
                        {t: 71.3, d: 1, n: 28},
                        {t: 73.333, d: 1, n: 27},
                        {t: 78.633, d: 1, n: 26},
                        {t: 81.967, d: 0, n: 25},
                        {t: 82.367, d: 0, n: 24},
                        {t: 84.867, d: 0, n: 23},
                        {t: 85.467, d: 1, n: 22},
                        {t: 85.967, d: 1, n: 21},
                        {t: 98.267, d: 1, n: 20},
                        {t: 98.667, d: 0, n: 19},
                        {t: 105.867, d: 0, n: 18},
                        {t: 105.9, d: 1, n: 17},
                        {t: 109.4, d: 1, n: 16},
                        {t: 110.067, d: 1, n: 15},
                        {t: 116.2, d: 0, n: 14},
                        {t: 116.267, d: 1, n: 13},
                        {t: 117.367, d: 1, n: 12},
                        {t: 125.9, d: 0, n: 11},
                        {t: 136.133, d: 0, n: 10},
                        {t: 151.667, d: 1, n: 9},
                        {t: 152.1, d: 0, n: 8},
                        {t: 167.367, d: 1, n: 7},
                        {t: 192.5, d: 1, n: 6},
                        {t: 193.8, d: 1, n: 5},
                        {t: 195.6, d: 0, n: 4},
                        {t: 241.967, d: 1, n: 3},
                        {t: 279.1, d: 1, n: 2},
                        {t: 287.967, d: 0, n: 1}]
                            ,
                    [
                        //Ethnicity - Other data
                        {t: 0, d: 0, n: 11},
                        {t: 10.067, d: 0, n: 11},
                        {t: 14.167, d: 0, n: 9},
                        {t: 16.7, d: 0, n: 8},
                        {t: 52.733, d: 0, n: 7},
                        {t: 73.6, d: 1, n: 6},
                        {t: 78.433, d: 0, n: 5},
                        {t: 98.633, d: 0, n: 4},
                        {t: 173.8, d: 1, n: 3},
                        {t: 296.7, d: 0, n: 2},
                        {t: 307.067, d: 0, n: 1}
                    ]
                            ,
                    [//Asian data
                        {t: 0, d: 0, n: 4},
                        {t: 4.6667, d: 1, n: 4},
                        {t: 15.1, d: 1, n: 3},
                        {t: 38.5333, d: 0, n: 2},
                        {t: 96.0667, d: 1, n: 1}
                    ],
                    [
                        //Hispanic
                        {t: 0, d: 0, n: 81},
                        {t: 5.767, d: 1, n: 81},
                        {t: 9.133, d: 1, n: 80},
                        {t: 9.333, d: 0, n: 79},
                        {t: 10.733, d: 1, n: 78},
                        {t: 11, d: 1, n: 77},
                        {t: 11.967, d: 1, n: 76},
                        {t: 12, d: 1, n: 75},
                        {t: 12.033, d: 1, n: 74},
                        {t: 13.633, d: 0, n: 73},
                        {t: 13.767, d: 0, n: 72},
                        {t: 14.233, d: 1, n: 71},
                        {t: 15.067, d: 1, n: 70},
                        {t: 16.233, d: 1, n: 69},
                        {t: 16.967, d: 1, n: 68},
                        {t: 17.867, d: 1, n: 67},
                        {t: 19.333, d: 0, n: 66},
                        {t: 19.833, d: 1, n: 65},
                        {t: 19.9, d: 1, n: 64},
                        {t: 19.967, d: 1, n: 63},
                        {t: 22.2, d: 1, n: 62},
                        {t: 22.567, d: 1, n: 61},
                        {t: 22.967, d: 1, n: 60},
                        {t: 23.133, d: 1, n: 59},
                        {t: 24.333, d: 0, n: 58},
                        {t: 24.633, d: 1, n: 57},
                        {t: 25.1, d: 1, n: 56},
                        {t: 28.467, d: 0, n: 55},
                        {t: 31.3, d: 1, n: 54},
                        {t: 33.933, d: 0, n: 53},
                        {t: 34.3, d: 1, n: 52},
                        {t: 35.933, d: 0, n: 51},
                        {t: 36.4, d: 0, n: 50},
                        {t: 37.9, d: 1, n: 49},
                        {t: 38.6, d: 0, n: 48},
                        {t: 40.633, d: 0, n: 47},
                        {t: 41.867, d: 1, n: 46},
                        {t: 41.967, d: 1, n: 45},
                        {t: 47.233, d: 0, n: 44},
                        {t: 49.5, d: 0, n: 43},
                        {t: 49.633, d: 1, n: 42},
                        {t: 55.6, d: 0, n: 41},
                        {t: 57.667, d: 0, n: 40},
                        {t: 57.967, d: 1, n: 39},
                        {t: 59.3, d: 0, n: 38},
                        {t: 65.733, d: 0, n: 37},
                        {t: 66.2, d: 0, n: 36},
                        {t: 74.8, d: 0, n: 35},
                        {t: 76.4, d: 1, n: 34},
                        {t: 84, d: 1, n: 33},
                        {t: 84.433, d: 0, n: 32},
                        {t: 86.2, d: 1, n: 31},
                        {t: 87.1, d: 1, n: 30},
                        {t: 88.667, d: 1, n: 29},
                        {t: 101.633, d: 1, n: 28},
                        {t: 108.067, d: 1, n: 27},
                        {t: 109.133, d: 0, n: 26},
                        {t: 115.667, d: 0, n: 25},
                        {t: 115.8, d: 0, n: 24},
                        {t: 117.967, d: 1, n: 23},
                        {t: 125.333, d: 1, n: 22},
                        {t: 130.767, d: 0, n: 21},
                        {t: 131.833, d: 1, n: 20},
                        {t: 132.367, d: 0, n: 19},
                        {t: 134.967, d: 1, n: 18},
                        {t: 140.8, d: 1, n: 17},
                        {t: 144.3, d: 1, n: 16},
                        {t: 151.233, d: 1, n: 15},
                        {t: 154.533, d: 0, n: 14},
                        {t: 155.233, d: 0, n: 13},
                        {t: 166.767, d: 1, n: 12},
                        {t: 171.367, d: 0, n: 11},
                        {t: 185.733, d: 1, n: 10},
                        {t: 206.933, d: 1, n: 9},
                        {t: 223.033, d: 1, n: 8},
                        {t: 236.2, d: 1, n: 7},
                        {t: 252.5, d: 1, n: 6},
                        {t: 260.767, d: 1, n: 5},
                        {t: 263.1, d: 1, n: 4},
                        {t: 264.533, d: 0, n: 3},
                        {t: 292.967, d: 1, n: 2},
                        {t: 299.833, d: 0, n: 1}
                    ]
                            ,
                    [
                        //White data
                        {t: 0, d: 0, n: 441},
                        {t: 3.567, d: 1, n: 441},
                        {t: 4.5, d: 1, n: 440},
                        {t: 4.833, d: 1, n: 439},
                        {t: 5.5, d: 0, n: 438},
                        {t: 5.9, d: 1, n: 437},
                        {t: 5.967, d: 1, n: 436},
                        {t: 6.433, d: 0, n: 435},
                        {t: 6.5, d: 1, n: 434},
                        {t: 6.867, d: 2, n: 433},
                        {t: 7.067, d: 1, n: 431},
                        {t: 7.2, d: 0, n: 430},
                        {t: 7.233, d: 1, n: 429},
                        {t: 7.267, d: 1, n: 428},
                        {t: 7.8, d: 1, n: 427},
                        {t: 7.867, d: 1, n: 426},
                        {t: 7.9, d: 1, n: 425},
                        {t: 8.167, d: 1, n: 424},
                        {t: 8.633, d: 1, n: 423},
                        {t: 8.967, d: 1, n: 422},
                        {t: 9.5, d: 1, n: 421},
                        {t: 9.6, d: 2, n: 420},
                        {t: 9.8, d: 1, n: 418},
                        {t: 10.1, d: 1, n: 417},
                        {t: 10.2, d: 1, n: 416},
                        {t: 10.233, d: 1, n: 415},
                        {t: 10.3, d: 1, n: 414},
                        {t: 10.333, d: 2, n: 413},
                        {t: 10.767, d: 2, n: 411},
                        {t: 11.2, d: 2, n: 409},
                        {t: 11.333, d: 1, n: 407},
                        {t: 11.533, d: 1, n: 406},
                        {t: 11.6, d: 1, n: 405},
                        {t: 11.933, d: 1, n: 404},
                        {t: 12.3, d: 1, n: 403},
                        {t: 12.5, d: 2, n: 402},
                        {t: 12.567, d: 1, n: 400},
                        {t: 12.7, d: 1, n: 399},
                        {t: 12.967, d: 1, n: 398},
                        {t: 13.367, d: 2, n: 397},
                        {t: 14.033, d: 1, n: 395},
                        {t: 14.2, d: 1, n: 394},
                        {t: 14.467, d: 1, n: 393},
                        {t: 14.967, d: 1, n: 392},
                        {t: 15.033, d: 1, n: 391},
                        {t: 15.067, d: 1, n: 390},
                        {t: 15.133, d: 1, n: 389},
                        {t: 15.2, d: 1, n: 388},
                        {t: 15.3, d: 1, n: 387},
                        {t: 15.433, d: 1, n: 386},
                        {t: 15.467, d: 1, n: 385},
                        {t: 15.633, d: 1, n: 384},
                        {t: 15.933, d: 1, n: 383},
                        {t: 16.033, d: 1, n: 382},
                        {t: 16.133, d: 2, n: 381},
                        {t: 16.5, d: 1, n: 379},
                        {t: 16.533, d: 1, n: 378},
                        {t: 16.733, d: 1, n: 377},
                        {t: 16.833, d: 1, n: 376},
                        {t: 17.167, d: 1, n: 375},
                        {t: 17.2, d: 1, n: 374},
                        {t: 17.533, d: 1, n: 373},
                        {t: 17.667, d: 1, n: 372},
                        {t: 17.7, d: 1, n: 371},
                        {t: 18.433, d: 1, n: 370},
                        {t: 18.533, d: 1, n: 369},
                        {t: 18.833, d: 0, n: 368},
                        {t: 18.9, d: 1, n: 367},
                        {t: 19.033, d: 1, n: 366},
                        {t: 19.4, d: 1, n: 365},
                        {t: 20.133, d: 1, n: 364},
                        {t: 20.233, d: 1, n: 363},
                        {t: 20.267, d: 3, n: 362},
                        {t: 20.333, d: 1, n: 359},
                        {t: 20.467, d: 1, n: 358},
                        {t: 20.5, d: 2, n: 357},
                        {t: 20.533, d: 1, n: 355},
                        {t: 20.567, d: 1, n: 354},
                        {t: 20.9, d: 1, n: 353},
                        {t: 20.933, d: 1, n: 352},
                        {t: 21.7, d: 1, n: 351},
                        {t: 21.967, d: 1, n: 350},
                        {t: 22.267, d: 1, n: 349},
                        {t: 23.267, d: 0, n: 348},
                        {t: 23.533, d: 1, n: 347},
                        {t: 23.6, d: 1, n: 346},
                        {t: 23.667, d: 1, n: 345},
                        {t: 23.867, d: 1, n: 344},
                        {t: 24.033, d: 2, n: 343},
                        {t: 24.1, d: 1, n: 341},
                        {t: 24.167, d: 0, n: 340},
                        {t: 24.3, d: 1, n: 339},
                        {t: 24.333, d: 1, n: 338},
                        {t: 24.4, d: 1, n: 337},
                        {t: 24.733, d: 1, n: 336},
                        {t: 24.767, d: 1, n: 335},
                        {t: 25.033, d: 1, n: 334},
                        {t: 25.267, d: 1, n: 333},
                        {t: 25.367, d: 2, n: 332},
                        {t: 25.5, d: 1, n: 330},
                        {t: 25.567, d: 1, n: 329},
                        {t: 25.9, d: 1, n: 328},
                        {t: 26.3, d: 1, n: 327},
                        {t: 26.567, d: 0, n: 326},
                        {t: 26.667, d: 1, n: 325},
                        {t: 26.7, d: 1, n: 324},
                        {t: 26.8, d: 1, n: 323},
                        {t: 28.5, d: 1, n: 322},
                        {t: 28.6, d: 1, n: 321},
                        {t: 28.733, d: 2, n: 320},
                        {t: 29.067, d: 1, n: 318},
                        {t: 29.2, d: 1, n: 317},
                        {t: 29.5, d: 1, n: 316},
                        {t: 29.667, d: 1, n: 315},
                        {t: 30.567, d: 1, n: 314},
                        {t: 32, d: 0, n: 313},
                        {t: 32.433, d: 0, n: 312},
                        {t: 32.567, d: 1, n: 311},
                        {t: 32.6, d: 1, n: 310},
                        {t: 32.7, d: 0, n: 309},
                        {t: 32.767, d: 1, n: 308},
                        {t: 32.967, d: 1, n: 307},
                        {t: 33.333, d: 2, n: 306},
                        {t: 33.4, d: 1, n: 304},
                        {t: 33.533, d: 1, n: 303},
                        {t: 33.733, d: 1, n: 302},
                        {t: 33.767, d: 1, n: 301},
                        {t: 33.967, d: 1, n: 300},
                        {t: 34.533, d: 1, n: 299},
                        {t: 35.367, d: 1, n: 298},
                        {t: 35.533, d: 0, n: 297},
                        {t: 35.6, d: 1, n: 296},
                        {t: 35.667, d: 1, n: 295},
                        {t: 35.833, d: 1, n: 294},
                        {t: 36.167, d: 0, n: 293},
                        {t: 36.233, d: 0, n: 292},
                        {t: 36.3, d: 1, n: 291},
                        {t: 36.333, d: 1, n: 290},
                        {t: 36.733, d: 1, n: 288},
                        {t: 36.967, d: 1, n: 287},
                        {t: 38.4, d: 2, n: 286},
                        {t: 38.767, d: 1, n: 284},
                        {t: 38.967, d: 1, n: 283},
                        {t: 39, d: 1, n: 282},
                        {t: 39.133, d: 1, n: 281},
                        {t: 39.333, d: 1, n: 280},
                        {t: 39.367, d: 0, n: 279},
                        {t: 39.533, d: 0, n: 278},
                        {t: 39.867, d: 1, n: 276},
                        {t: 40.5, d: 0, n: 275},
                        {t: 40.6, d: 1, n: 274},
                        {t: 40.833, d: 1, n: 273},
                        {t: 41.633, d: 0, n: 272},
                        {t: 41.7, d: 1, n: 271},
                        {t: 41.733, d: 1, n: 270},
                        {t: 41.933, d: 2, n: 268},
                        {t: 42.167, d: 1, n: 266},
                        {t: 42.533, d: 1, n: 264},
                        {t: 42.567, d: 0, n: 263},
                        {t: 43.4, d: 1, n: 262},
                        {t: 43.433, d: 1, n: 261},
                        {t: 43.633, d: 1, n: 260},
                        {t: 43.767, d: 1, n: 259},
                        {t: 44.533, d: 1, n: 258},
                        {t: 44.933, d: 1, n: 257},
                        {t: 45.133, d: 1, n: 256},
                        {t: 45.3, d: 0, n: 255},
                        {t: 45.567, d: 1, n: 254},
                        {t: 45.633, d: 0, n: 253},
                        {t: 46.733, d: 1, n: 252},
                        {t: 46.933, d: 0, n: 251},
                        {t: 47, d: 1, n: 250},
                        {t: 47.6, d: 0, n: 249},
                        {t: 47.667, d: 0, n: 248},
                        {t: 48.167, d: 1, n: 247},
                        {t: 48.333, d: 0, n: 245},
                        {t: 48.367, d: 0, n: 244},
                        {t: 48.5, d: 0, n: 243},
                        {t: 49.067, d: 1, n: 242},
                        {t: 49.167, d: 1, n: 241},
                        {t: 49.467, d: 0, n: 240},
                        {t: 49.633, d: 1, n: 239},
                        {t: 50.167, d: 0, n: 238},
                        {t: 50.567, d: 0, n: 237},
                        {t: 50.7, d: 1, n: 236},
                        {t: 50.967, d: 1, n: 235},
                        {t: 51.1, d: 1, n: 234},
                        {t: 51.667, d: 1, n: 233},
                        {t: 51.767, d: 0, n: 232},
                        {t: 51.967, d: 1, n: 231},
                        {t: 52.167, d: 0, n: 230},
                        {t: 52.333, d: 1, n: 229},
                        {t: 52.967, d: 2, n: 227},
                        {t: 53.233, d: 1, n: 225},
                        {t: 53.767, d: 1, n: 224},
                        {t: 53.8, d: 1, n: 223},
                        {t: 54.167, d: 1, n: 222},
                        {t: 55.5, d: 1, n: 221},
                        {t: 56.167, d: 0, n: 220},
                        {t: 56.567, d: 1, n: 219},
                        {t: 56.633, d: 0, n: 218},
                        {t: 56.833, d: 1, n: 217},
                        {t: 56.867, d: 0, n: 216},
                        {t: 57.2, d: 1, n: 215},
                        {t: 57.433, d: 1, n: 214},
                        {t: 58.367, d: 1, n: 213},
                        {t: 59.067, d: 1, n: 212},
                        {t: 59.4, d: 1, n: 211},
                        {t: 59.933, d: 1, n: 210},
                        {t: 59.967, d: 1, n: 209},
                        {t: 60.133, d: 1, n: 208},
                        {t: 60.833, d: 1, n: 207},
                        {t: 61.133, d: 1, n: 206},
                        {t: 61.433, d: 1, n: 205},
                        {t: 61.567, d: 0, n: 204},
                        {t: 62.233, d: 1, n: 203},
                        {t: 62.6, d: 1, n: 202},
                        {t: 63.567, d: 1, n: 201},
                        {t: 63.967, d: 1, n: 200},
                        {t: 64.033, d: 1, n: 199},
                        {t: 64.067, d: 1, n: 198},
                        {t: 64.933, d: 1, n: 197},
                        {t: 65.233, d: 1, n: 196},
                        {t: 65.6, d: 0, n: 195},
                        {t: 66.333, d: 0, n: 194},
                        {t: 67.067, d: 0, n: 193},
                        {t: 67.167, d: 0, n: 192},
                        {t: 67.667, d: 1, n: 191},
                        {t: 68.1, d: 0, n: 190},
                        {t: 68.5, d: 1, n: 189},
                        {t: 68.867, d: 0, n: 188},
                        {t: 69.1, d: 1, n: 187},
                        {t: 69.9, d: 1, n: 186},
                        {t: 70.033, d: 1, n: 185},
                        {t: 70.067, d: 1, n: 184},
                        {t: 70.167, d: 1, n: 183},
                        {t: 70.5, d: 1, n: 182},
                        {t: 70.533, d: 0, n: 181},
                        {t: 70.733, d: 0, n: 180},
                        {t: 70.9, d: 0, n: 179},
                        {t: 70.967, d: 0, n: 178},
                        {t: 71.033, d: 1, n: 177},
                        {t: 71.233, d: 1, n: 176},
                        {t: 71.433, d: 1, n: 175},
                        {t: 71.6, d: 0, n: 173},
                        {t: 72.833, d: 0, n: 172},
                        {t: 73.2, d: 1, n: 171},
                        {t: 74.167, d: 1, n: 170},
                        {t: 74.367, d: 0, n: 169},
                        {t: 74.467, d: 1, n: 168},
                        {t: 74.7, d: 1, n: 167},
                        {t: 75.067, d: 1, n: 166},
                        {t: 75.6, d: 1, n: 165},
                        {t: 75.733, d: 0, n: 164},
                        {t: 76.3, d: 0, n: 163},
                        {t: 76.833, d: 1, n: 162},
                        {t: 77.033, d: 0, n: 161},
                        {t: 78.5, d: 1, n: 160},
                        {t: 78.6, d: 1, n: 159},
                        {t: 79.4, d: 1, n: 158},
                        {t: 79.633, d: 0, n: 157},
                        {t: 79.8, d: 0, n: 156},
                        {t: 79.9, d: 0, n: 155},
                        {t: 80, d: 0, n: 154},
                        {t: 80.833, d: 1, n: 153},
                        {t: 80.9, d: 1, n: 152},
                        {t: 81.2, d: 1, n: 151},
                        {t: 82.4, d: 1, n: 150},
                        {t: 82.533, d: 0, n: 149},
                        {t: 84.467, d: 1, n: 148},
                        {t: 84.5, d: 0, n: 147},
                        {t: 85.467, d: 0, n: 146},
                        {t: 85.6, d: 1, n: 145},
                        {t: 86.933, d: 1, n: 144},
                        {t: 87.1, d: 0, n: 142},
                        {t: 87.333, d: 1, n: 141},
                        {t: 87.567, d: 1, n: 140},
                        {t: 88.033, d: 1, n: 139},
                        {t: 88.433, d: 1, n: 138},
                        {t: 88.633, d: 1, n: 137},
                        {t: 88.667, d: 0, n: 136},
                        {t: 90.4, d: 0, n: 135},
                        {t: 91.133, d: 1, n: 134},
                        {t: 92.867, d: 1, n: 133},
                        {t: 92.933, d: 0, n: 132},
                        {t: 93.133, d: 1, n: 131},
                        {t: 93.5, d: 0, n: 130},
                        {t: 94.833, d: 0, n: 129},
                        {t: 95.533, d: 1, n: 128},
                        {t: 96.767, d: 1, n: 127},
                        {t: 97.267, d: 1, n: 126},
                        {t: 97.667, d: 0, n: 125},
                        {t: 97.9, d: 1, n: 124},
                        {t: 99, d: 0, n: 123},
                        {t: 99.533, d: 1, n: 122},
                        {t: 99.967, d: 0, n: 121},
                        {t: 101.067, d: 1, n: 120},
                        {t: 101.933, d: 1, n: 119},
                        {t: 102.7, d: 1, n: 118},
                        {t: 102.833, d: 0, n: 117},
                        {t: 103.433, d: 1, n: 116},
                        {t: 103.9, d: 1, n: 115},
                        {t: 104.567, d: 1, n: 114},
                        {t: 105.033, d: 1, n: 113},
                        {t: 105.367, d: 0, n: 112},
                        {t: 105.7, d: 0, n: 111},
                        {t: 105.9, d: 1, n: 110},
                        {t: 106.3, d: 1, n: 109},
                        {t: 108.367, d: 0, n: 108},
                        {t: 108.467, d: 1, n: 107},
                        {t: 109.733, d: 1, n: 106},
                        {t: 110.9, d: 0, n: 105},
                        {t: 112, d: 1, n: 104},
                        {t: 112.733, d: 0, n: 103},
                        {t: 112.9, d: 1, n: 102},
                        {t: 113.067, d: 1, n: 101},
                        {t: 114.667, d: 1, n: 100},
                        {t: 117.2, d: 1, n: 99},
                        {t: 117.567, d: 0, n: 98},
                        {t: 118, d: 1, n: 97},
                        {t: 118.333, d: 1, n: 96},
                        {t: 118.567, d: 0, n: 95},
                        {t: 119.967, d: 1, n: 94},
                        {t: 121.367, d: 1, n: 93},
                        {t: 122.033, d: 0, n: 92},
                        {t: 122.733, d: 0, n: 91},
                        {t: 123.833, d: 1, n: 90},
                        {t: 124.667, d: 1, n: 89},
                        {t: 125.333, d: 1, n: 88},
                        {t: 126.2, d: 1, n: 87},
                        {t: 129.9, d: 1, n: 86},
                        {t: 131.6, d: 0, n: 85},
                        {t: 131.9, d: 1, n: 84},
                        {t: 133.9, d: 1, n: 83},
                        {t: 134.067, d: 1, n: 82},
                        {t: 134.267, d: 0, n: 81},
                        {t: 134.933, d: 1, n: 80},
                        {t: 135.233, d: 0, n: 79},
                        {t: 135.5, d: 1, n: 78},
                        {t: 135.6, d: 1, n: 77},
                        {t: 135.767, d: 1, n: 76},
                        {t: 137.267, d: 1, n: 75},
                        {t: 138.033, d: 1, n: 74},
                        {t: 140.933, d: 1, n: 73},
                        {t: 141.1, d: 1, n: 72},
                        {t: 141.533, d: 1, n: 71},
                        {t: 141.733, d: 1, n: 70},
                        {t: 142.167, d: 1, n: 69},
                        {t: 142.733, d: 0, n: 68},
                        {t: 143.133, d: 1, n: 67},
                        {t: 143.8, d: 0, n: 66},
                        {t: 144.7, d: 1, n: 65},
                        {t: 146.4, d: 1, n: 64},
                        {t: 146.5, d: 1, n: 63},
                        {t: 146.967, d: 0, n: 62},
                        {t: 148.1, d: 1, n: 61},
                        {t: 148.533, d: 0, n: 60},
                        {t: 149.067, d: 1, n: 59},
                        {t: 150.6, d: 0, n: 58},
                        {t: 150.933, d: 1, n: 57},
                        {t: 151.4, d: 1, n: 56},
                        {t: 153.067, d: 1, n: 55},
                        {t: 154.033, d: 1, n: 54},
                        {t: 156, d: 1, n: 53},
                        {t: 157.067, d: 1, n: 52},
                        {t: 157.7, d: 1, n: 51},
                        {t: 158.633, d: 1, n: 50},
                        {t: 158.867, d: 0, n: 49},
                        {t: 162.5, d: 1, n: 48},
                        {t: 163.6, d: 1, n: 47},
                        {t: 164.633, d: 1, n: 46},
                        {t: 165.133, d: 1, n: 45},
                        {t: 165.6, d: 1, n: 44},
                        {t: 168.867, d: 1, n: 43},
                        {t: 169.467, d: 1, n: 42},
                        {t: 173.1, d: 1, n: 41},
                        {t: 174.267, d: 1, n: 40},
                        {t: 175.533, d: 0, n: 39},
                        {t: 176.1, d: 1, n: 38},
                        {t: 176.5, d: 1, n: 37},
                        {t: 177.633, d: 1, n: 36},
                        {t: 177.867, d: 1, n: 35},
                        {t: 181.367, d: 1, n: 34},
                        {t: 185.567, d: 1, n: 33},
                        {t: 187.767, d: 1, n: 32},
                        {t: 192.3, d: 0, n: 31},
                        {t: 192.633, d: 1, n: 30},
                        {t: 193.2, d: 1, n: 29},
                        {t: 196.067, d: 0, n: 28},
                        {t: 198.9, d: 1, n: 27},
                        {t: 200.167, d: 0, n: 26},
                        {t: 202.1, d: 1, n: 25},
                        {t: 203.033, d: 1, n: 24},
                        {t: 203.167, d: 0, n: 23},
                        {t: 207.867, d: 0, n: 22},
                        {t: 213.233, d: 0, n: 21},
                        {t: 215.933, d: 1, n: 20},
                        {t: 217.633, d: 1, n: 19},
                        {t: 221.733, d: 0, n: 18},
                        {t: 223.1, d: 0, n: 17},
                        {t: 225.2, d: 1, n: 16},
                        {t: 226.3, d: 0, n: 15},
                        {t: 227.1, d: 1, n: 14},
                        {t: 229.933, d: 1, n: 13},
                        {t: 232.5, d: 0, n: 12},
                        {t: 235.4, d: 1, n: 11},
                        {t: 237.667, d: 1, n: 10},
                        {t: 239.167, d: 0, n: 9},
                        {t: 258.833, d: 1, n: 8},
                        {t: 263.633, d: 0, n: 7},
                        {t: 264.9, d: 0, n: 6},
                        {t: 272.3, d: 0, n: 5},
                        {t: 280, d: 1, n: 4},
                        {t: 288.2, d: 0, n: 3},
                        {t: 293.067, d: 0, n: 2},
                        {t: 320.633, d: 1, n: 1}]
                ]};
            var w = 900, h = 300, m = 35, max = min = 0;
            /* Computed Data progression, survival, prob, censored */
            for (var a = 0; a < data.treatments.length; a++) {
                for (var b = 0; b < data.treatments[a].length; b++) {
                    var reed = data.treatments[a][b];
                    var brad = (b > 0) ? data.treatments[a][b - 1].n - reed.d : reed.n;

                    reed.progression = reed.d / reed.n;
                    reed.survival = 1 - reed.progression;
                    reed.prob = (b == 0) ? reed.survival : data.treatments[a][b - 1].prob * reed.survival;
                    max = (max < reed.t) ? reed.t : max;
                    reed.censored = (reed.n < brad) ? true : false;
                }
            }
            /* Begin d3.js */
            //Scalar functions

            var tip = d3.tip()
                    .attr('class', 'd3-tip')
                    .attr('id', 'african-tip')
                    .offset(function () {
                        return [(this.getBBox().height / 2) + 100, ((this.getBBox().height / 2) - 50)];
                    })
                    .html(function (d) {
                        var coordinates = d3.mouse(this);
                        xValue = x.invert(coordinates[0]);
                        yValue = y.invert(coordinates[1]);

                        return "<strong> Months Survived : " + d3.format(".2f")(xValue) +
                                " months <br/> Risk : " + d3.format(".2f")(100 * yValue) + " % </strong>";
                    });

            var x = d3.scale.linear().domain([0, max]).range([0, w - m]);
            var y = d3.scale.linear().domain([1, 0]).range([0, h - 20]);
            //Define axses
            var xAxis = d3.svg.axis()
                    .scale(x)
                    .tickSize(2)
                    .tickPadding(6)
                    .orient("bottom");

            var yAxis = d3.svg.axis()
                    .scale(y)
                    .tickSize(2)
                    .tickPadding(6)
                    .orient("left");
            //This is the accessor function
            var lineFunction = d3.svg.line()
                    .x(function (d) {
                        return x(d.t) + (2.25 * m);
                    })
                    .y(function (d) {
                        return y(d.prob);
                    })
                    .interpolate("step-before");


            //Draw the svg container
            var kaplan = d3.select("#wrapper").append("svg")
                    .attr("width", w + (2 * m))
                    .attr("height", h + (2 * m));

            kaplan.call(tip);
            //Draw the lines
            var africanLine = kaplan.append("path")
                    .attr("d", lineFunction(data.treatments[0]))
                    .attr("stroke", "#ff4c4c")
                    .attr("stroke-width", 3)
                    .attr("fill", "none")
                    .attr("opacity", 0.7)
                    .attr("class", "line")
                    .attr('id', 'africanLine')
                    .on('mouseover', tip.show)
                    .on('mouseout', tip.hide)

            var otherLine = kaplan.append("path")
                    .attr("d", lineFunction(data.treatments[1]))
                    .attr("stroke", "#197319")
                    .attr("stroke-width", 3)
                    .attr("fill", "none")
                    .attr('id', 'otherLine')
                    .attr("class", "line")
                    .attr("opacity", 0.7).on('mouseover', tip.show)
                    .on('mouseout', tip.hide);

            var asianLine = kaplan.append("path")
                    .attr("d", lineFunction(data.treatments[2]))
                    .attr("stroke", "#6666ff")
                    .attr("stroke-width", 3)
                    .attr("fill", "none")
                    .attr('id', 'asianLine')
                    .attr("class", "line")
                    .attr("opacity", 0.7).on('mouseover', tip.show)
                    .on('mouseout', tip.hide);

            var hispanicLine = kaplan.append("path")
                    .attr("d", lineFunction(data.treatments[3]))
                    .attr("stroke", "#ffc04c")
                    .attr("stroke-width", 3)
                    .attr("fill", "none")
                    .attr('id', 'hispanicLine')
                    .attr("class", "line")
                    .attr("opacity", 0.7).on('mouseover', tip.show)
                    .on('mouseout', tip.hide);

            var whiteLine = kaplan.append("path")
                    .attr("d", lineFunction(data.treatments[4]))
                    .attr("stroke", "#20BF9F")
                    .attr("stroke-width", 3)
                    .attr("fill", "none")
                    .attr('id', 'whiteLine')
                    .attr("class", "line")
                    .attr("opacity", 0.7).on('mouseover', tip.show)
                    .on('mouseout', tip.hide);

            //Draw the x-axis
            var theXAxis = kaplan.append("g")
                    .attr("class", "xaxis")
                    .attr("transform", "translate(" + 2 * m + "," + h + ")")
                    .call(xAxis)

            //Draw the y-axis
            var theYAxis = kaplan.append("g")
                    .attr("class", "yaxis")
                    .attr("transform", "translate(" + 2 * m + ", " + 0.20 * m + ")")
                    .call(yAxis)

            kaplan.append("text")
                    .attr("x", (w / 2))
                    .attr("y", h + 50)
                    .style("text-anchor", "middle")
                    .text("Overall Survival Rate in months");
            kaplan.append("text")
                    .attr("transform", "rotate(-90)")
                    .attr("x", h - (1.5 * h))
                    .attr("y", ((h / 10) - (h / 20)))
                    .attr("dy", "1em")
                    .style("text-anchor", "middle")
                    .text("Probability of Survival");
            var color_set = d3.scale.ordinal()
                    .domain(['white', 'other', 'african-american', 'hispanic', 'asian/pacific islander'])
                    .range(['#20BF9F', '#197319', '#ff4c4c', '#ffc04c', '#6666ff']);
            var legendRectSize = 18;
            var legendSpacing = 4;
            var legend = kaplan.selectAll('.legend')
                    .data(color_set.domain())
                    .enter()
                    .append('g')
                    .attr('class', 'legend')
                    .attr('transform', function (d, i) {
                        var height = legendRectSize + legendSpacing;
                        var x = 825;
                        var y = (i * height);
                        return 'translate(' + x + ',' + y + ')';
                    });
            legend.append('rect')
                    .attr('width', legendRectSize)
                    .attr('height', legendRectSize)
                    .style('fill', color_set)
                    .style('stroke', color_set);
            legend.append('text')
                    .attr('x', legendRectSize + legendSpacing)
                    .attr('y', legendRectSize - legendSpacing)
                    .text(function (d) {
                        return d;
                    });

            var queryString = window.location.search;
            var ethnicity = queryString.substring(1);
            ethnicity = ethnicity.toLowerCase();
            kaplan.selectAll("#"+ethnicity+"Line").attr('stroke-width', 6);
            $(document).ready(function () {
                $("#african").click(function () {
                    if ($("#african").is(':checked')) {
                        $(this).checked = true;
                        $("#africanLine").show();
                    }
                    else {
                        $("#africanLine").hide();
                    }
                });
                $("#asian").click(function () {
                    if ($("#asian").is(':checked')) {
                        $(this).checked = true;
                        $("#asianLine").show();
                    }
                    else {
                        $("#asianLine").hide();
                    }
                });
                $("#white").click(function () {
                    if ($("#white").is(':checked')) {
                        $(this).checked = true;
                        $("#whiteLine").show();
                    }
                    else {
                        $("#whiteLine").hide();
                    }
                });
                $("#hispanic").click(function () {
                    if ($("#hispanic").is(':checked')) {
                        $(this).checked = true;
                        $("#hispanicLine").show();
                    }
                    else {
                        $("#hispanicLine").hide();
                    }
                });
                $("#other").click(function () {
                    if ($("#other").is(':checked')) {
                        $(this).checked = true;
                        $("#otherLine").show();
                    }
                    else {
                        $("#otherLine").hide();
                    }
                });

                $("#africanLine").click(function () {
                    window.location = "kp_africanAmerican.html"
                });

                $("#asianLine").click(function () {
                    window.location = "kp_asian.html"
                });
                $("#hispanicLine").click(function () {
                    window.location = "kp_hispanic.html"
                });
                $("#whiteLine").click(function () {
                    window.location = "kp_white.html"
                });
                $("#otherLine").click(function () {
                    window.location = "kp_other.html"
                });


                $(".line").mouseover(function () {
                    $('.line').css('cursor', 'pointer');
                });

            });
        </script>
    </body>
</html>